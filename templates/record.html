{% extends "base.html" %}
{% block content %}
  <h1>{% if form.instance.pk %}Редактировать{% else %}Создать{% endif %} запись</h1>

  <form method="post">
    {% csrf_token %}
    {{ form.date.label_tag }} {{ form.date }}
    {{ form.status.label_tag }} {{ form.status }}
    {{ form.amount.label_tag }} {{ form.amount }}
    {{ form.comment.label_tag }} {{ form.comment }}

        <div>
      {{ form.type.label_tag }}
      <select name="type" id="id_type" onchange="this.form.submit()">
        {% for choice in form.type.field.choices %}
          <option value="{{ choice.0 }}" {% if form.type.value == choice.0 %}selected{% endif %}>
            {{ choice.1 }}
          </option>
        {% endfor %}
      </select>
    </div>

    <div>
      {{ form.category.label_tag }}
      <select name="category" id="id_category" {% if not form.category.field.queryset %}disabled{% endif %} onchange="this.form.submit()">
        {% if form.category.field.queryset %}
          {% for choice in form.category.field.choices %}
            <option value="{{ choice.0 }}" {% if form.category.value == choice.0 %}selected{% endif %}>
              {{ choice.1 }}
            </option>
          {% endfor %}
        {% else %}
          <option value="">-- Выберите тип сначала --</option>
        {% endif %}
      </select>
    </div>

    <div>
      {{ form.subcategory.label_tag }}
      <select name="subcategory" id="id_subcategory" {% if not form.subcategory.field.queryset %}disabled{% endif %}>
        {% if form.subcategory.field.queryset %}
          {% for choice in form.subcategory.field.choices %}
            <option value="{{ choice.0 }}" {% if form.subcategory.value == choice.0 %}selected{% endif %}>
              {{ choice.1 }}
            </option>
          {% endfor %}
        {% else %}
          <option value="">-- Выберите категорию сначала --</option>
        {% endif %}
      </select>
    </div>

    <button type="submit">Сохранить</button>
    <a href="{% url 'record-list' %}">Назад</a>
  </form>
{% endblock %}








    <button type="submit">Сохранить</button>
    <a href="{% url 'record-list' %}">Назад</a>
  </form>
{% endblock %}
